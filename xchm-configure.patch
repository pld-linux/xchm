--- xchm-0.5.2/configure.in.orig	2003-08-04 10:31:58.000000000 +0200
+++ xchm-0.5.2/configure.in	2003-08-04 21:34:12.000000000 +0200
@@ -2,18 +2,23 @@
 AC_INIT(src/chmfile.cpp)
 AM_CONFIG_HEADER(config.h)
 
-CXXFLAGS="-W -Wall"
+CXXFLAGS="$CXXFLAGS -W -Wall"
+
+AC_CHECK_PROG(WXCFG, wx-config, wx-config, no)
+if test "x$WXCFG" == "xno"; then
+    AC_MSG_ERROR([wx-config not found in PATH. Do you have wxWindows installed?])
+fi
+AC_SUBST(WXCFG)
 
 AC_ARG_ENABLE(static, 
 	      [  --enable-static         link statically to wxWindows.], 
-	      LINKOPT="`wx-config --static --libs`",
-	      LINKOPT="`wx-config --libs`")
+	      LINKOPT="`$WXCFG --static --libs`",
+	      LINKOPT="`$WXCFG --libs`")
 AC_SUBST(LINKOPT)
 
 AC_ARG_ENABLE(debug,
 	      [  --enable-debug          compile with gdb debug information.], 
-	      CXXFLAGS="$CXXFLAGS -g",
-	      CXXFLAGS="$CXXFLAGS -O2")
+	      CXXFLAGS="$CXXFLAGS -g")
 
 AM_INIT_AUTOMAKE(xchm, 0.5.2)
 AC_PROG_CXX
@@ -25,11 +30,6 @@
     AC_MSG_ERROR([Can't find/use -lchm. Please install CHMLIB first.])
 )
 
-AC_CHECK_PROG(WXCFG, wx-config, wx-config, no)
-if test "x$WXCFG" == "xno"; then
-    AC_MSG_ERROR([wx-config not found in PATH. Do you have wxWindows installed?])
-fi
-
 
 AC_OUTPUT(Makefile src/Makefile)
 
--- xchm-0.5.2/src/Makefile.am.orig	2003-07-31 21:01:01.000000000 +0200
+++ xchm-0.5.2/src/Makefile.am	2003-08-04 21:34:33.000000000 +0200
@@ -1,4 +1,4 @@
-INCLUDES = -I$(top_srcdir)/art `wx-config --cppflags`
+INCLUDES = -I$(top_srcdir)/art `$(WXCFG) --cppflags`
 
 bin_PROGRAMS = xchm
 xchm_SOURCES = chmapp.cpp chmfile.cpp chmframe.cpp chmfshandler.cpp \
